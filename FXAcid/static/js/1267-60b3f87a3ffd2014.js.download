(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1267],{13866:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var n={BUY_RISE_GREEN:"buy-rise-green",BUY_RISE_RED:"buy-rise-red"}},45531:function(e,t,r){"use strict";var n=r(67294);t.Z=function(e,t,r){var a=(0,n.useState)(e),o=a[0],u=a[1],i=(0,n.useRef)(null),c=(0,n.useRef)(0);return(0,n.useEffect)((function(){var n=Date.now();if(null!==r&&void 0!==r&&r.leading||null!==r&&void 0!==r&&r.trailing){if("function"===typeof e)if(null!==r&&void 0!==r&&r.leading&&n-c.current>=t){var a=e();u(a),c.current=n}else null!==r&&void 0!==r&&r.trailing&&!i.current&&(i.current=setTimeout((function(){var t=e();u(t),c.current=Date.now(),i.current=null}),t));else null!==r&&void 0!==r&&r.leading&&n-c.current>=t?(u(e),c.current=n):null!==r&&void 0!==r&&r.trailing&&!i.current&&(i.current=setTimeout((function(){u(e),c.current=Date.now(),i.current=null}),t));return function(){i.current&&(clearTimeout(i.current),i.current=null)}}u(e)}),[e,t,r]),"function"===typeof o?o():o}},71269:function(e,t,r){"use strict";r.d(t,{eJ:function(){return O},Ei:function(){return g},ZP:function(){return _},JU:function(){return h}});var n=r(59499),a=r(4730),o=r(67294),u=r(89838),i=r(31088),c=r(1783),s={MAX_PRICE:1e7,MAX_LENGTH_CODE:6,MAX_LENGTH_PASSWORD:20,MAX_LENGTH_INPUT:200},l=r(21991),f=r.n(l),p=r(69348),d=r(73619),y=r(85893),v=["symbol","symbolMarket","availableMax","offsetFlag","price","amountType","onChange","onTypeChange","suffix","max","value","precision","tipType"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={B:"B",U:"U"},g={key:O.B,text:""},P=function(e){return!e||0===Object.keys(e).length},h=function(e){var t=e.valuePayload,r=e.symbol,n=e.symbolMarket,a=e.price,o=e.availableMax,u=e.offsetFlag,i=e.bType,s=e.t,l=t,f=r.PriceCurrency,d=r.PricePrecision,y=r.BaseCurrency,v=r.CoinPrecision,m=r.MinOrderVolume,b=r.MinOrderCost;if(!l)return{message:""};var g=a;if(a||(g=n.LastPrice||0),!g)return{message:s("L0008298\u8bf7\u5148\u8f93\u5165\u4ef7\u683c")};"".concat(l).endsWith("%")&&(l=o*("".concat(l).replace("%","")/100)*(i.key===O.U?g:1));var P=0;if(u===p.TN.OPEN)if(i.key===O.B){var h=Number((0,c.formatDecimal)(b/g,v,"ceil",!0)),S=Math.max(h,m);if(l<S)return{orderMessage:s("L0008299\u4e0b\u5355\u5931\u8d25\u6700\u5c0f\u4e0b\u5355\u6570\u91cf\u4e3a",{0:"".concat(S," ").concat(y)}),message:s("L0007749\u6700\u5c0f\u4e0b\u5355\u6570\u91cf\u4e3a",{0:"".concat(S," ").concat(y)})}}else{if(Number(m*g)<Number(b)){var _=(0,c.formatDecimal)(b/g,v,"ceil",!0);if(P=(0,c.formatDecimal)(_*g,d,"ceil",!0),Number(l)<Number(P)){var D=(0,c.formatDecimal)(b/g,v,"ceil");return{orderMessage:s("L0008300\u4e0b\u5355\u5931\u8d25\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(P," ").concat(f)}),message:s("L0008301\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(P," ").concat(f),1:"".concat(D," ").concat(y)})}}}else if(P=(0,c.formatDecimal)(m*g,d,"ceil"),l/g<m)return{orderMessage:s("L0008300\u4e0b\u5355\u5931\u8d25\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(P," ").concat(f)}),message:s("L0008301\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(P," ").concat(f),1:"".concat(m," ").concat(y)})}}else if(i.key===O.U&&(P=(0,c.formatDecimal)(m*g,d,"ceil",!0),Number(l)<Number(P))){var C=(0,c.formatDecimal)(b/g,v,"ceil");return{orderMessage:s("L0008300\u4e0b\u5355\u5931\u8d25\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(C," ").concat(y)}),message:s("L0008301\u6700\u5c0f\u4e0b\u5355\u91d1\u989d\u4e3a",{0:"".concat(P," ").concat(f),1:"".concat(m," ").concat(y)})}}if(i.key===O.U&&Number(l)>=Number(P)){var T=(0,c.formatDecimal)(l/g,v);return{message:"\u2248".concat(T," ").concat(y)}}return{}},S=o.forwardRef((function(e,t){var r=e.symbol,n=e.symbolMarket,l=e.availableMax,p=e.offsetFlag,m=e.price,S=e.amountType,_=e.onChange,D=e.onTypeChange,C=e.suffix,T=e.max,w=e.value,j=e.precision,k=e.tipType,E=void 0===k?"full":k,I=(0,a.default)(e,v),R=(0,d.default)().t,x=(0,o.useState)(g),M=x[0],N=x[1],L=(0,o.useState)(""),Z=L[0],F=L[1],U=(0,o.useState)(w),B=U[0],A=U[1],H=(0,o.useMemo)((function(){return"unLimit"===E}),[E]),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;if(H)return"";var t=h({valuePayload:e,symbol:r,symbolMarket:n,price:m,availableMax:l,offsetFlag:p,bType:M,t:R});return t.message};(0,o.useEffect)((function(){(/\d+%/.test(w)||""===w)&&A(w)}),[w]),(0,o.useEffect)((function(){m||F(G())}),[n]),(0,o.useEffect)((function(){F(G())}),[m]),(0,o.useEffect)((function(){null!==S&&void 0!==S&&S.key&&N(S)}),[S]),(0,o.useImperativeHandle)(t,(function(){return{verifyAmount:function(){return h({valuePayload:B,symbol:r,symbolMarket:n,price:m,availableMax:l,offsetFlag:p,bType:M,t:R})}}}));var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,a=G(e);F(a),A(e);var o=e;if(t.key===O.U){var u=m||n.LastPrice||0;""!==e&&(o=(0,c.formatDecimal)(Number(e)/u,r.CoinPrecision,"floor",!0))}_(o)},W=r.PriceCurrency,K=r.BaseCurrency,X=r.MaxOrderVolume,q=[{key:O.U,text:W},{key:O.B,text:K}],J=M;P(r)||(J=q.find((function(e){return e.key===M.key})));var Y=P(r)?C:(0,y.jsx)(i.Z,{dataSource:q,value:J,onSelected:function(e){V("",e),N(e),null===D||void 0===D||D(e)},className:f()["ainput-type"],selectorClassName:f()["ainput-type-selector"],arrowClassName:f()["ainput-type-arrow"],valueClassName:f()["ainput-type-value"],dropDownContainerClassName:f()["ainput-type-container"]}),z=T;return P(r)||(z=M.key===O.B?X:s.MAX_PRICE),(0,y.jsx)(u.Z,b(b({},I),{},{suffix:Y,onChange:V,tooltip:""!==w&&Z,max:z,value:B,precision:M.key===O.B?j:r.PricePrecision}))}));S.displayName="AmountInput";var _=o.memo(S)},76710:function(e,t,r){"use strict";r.d(t,{q:function(){return h}});var n=r(59499),a=r(50029),o=r(87794),u=r.n(o),i=r(67294),c=r(42626);function s(e,t,r){return e.sort((function(e,n){var a="asc"===r?e[t]>n[t]:e[t]<n[t];return""===r?0:a?1:-1})),[].concat(e)}var l=r(98436),f=r(29047),p=r(87610);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){return e.CopyMemberID},m=function(e){return!e.CopyMemberID},b=function(e){var t=e.isTrader,r=(0,i.useState)({}),n=r[0],a=r[1],o=(0,i.useState)({}),u=o[0],c=o[1],s=(0,i.useRef)({}),l=(0,i.useRef)({});return{setTradingState:(0,i.useCallback)((function(e){if(e.data){var t=y(y({},e),{},{data:e.data.filter(m)}),r=y(y({},e),{},{data:e.data.filter(v)});c(r),l.current=r,a(t),s.current=t}else c(e),l.current=e,a(e),s.current=e}),[t]),result:n,copyResult:u,resultRef:s,copyResultRef:l}},O=r(12204);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t,r,n=e.isLogin,o=e.isOpenTrade,d=e.currentSymbol,y=void 0===d?{}:d,v=e.isTrader,m=e.isFromModal,g=void 0!==m&&m,h=(0,i.useState)(!1),S=h[0],_=h[1],D=(0,i.useState)({field:"",order:""}),C=D[0],T=D[1],w=(0,i.useState)(!1),j=w[0],k=w[1],E=b({isTrader:v}),I=E.setTradingState,R=E.resultRef,x=E.copyResultRef,M=E.result,N=E.copyResult;function L(){return Z.apply(this,arguments)}function Z(){return Z=(0,a.default)(u().mark((function e(){var t,r,n,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],r=a.length>1&&void 0!==a[1]&&a[1],y.InstrumentID&&o){e.next=4;break}return e.abrupt("return");case 4:return t||k(!0),e.prev=5,e.next=8,(0,c.bt)(P(P({ProductGroup:y.ProductGroup},S?{InstrumentID:y.InstrumentID}:{}),{},{Valid:"1",pageIndex:1,pageSize:1e3}),{});case 8:if(n=e.sent,!r){e.next=11;break}return e.abrupt("return",n.data||[]);case 11:C.field&&C.order&&(n.data=s(n.data,C.field,C.order)),I(n||{}),e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(5),!r){e.next=19;break}return e.abrupt("return",[]);case 19:I({});case 20:return e.prev=20,k(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,15,20,23]])}))),Z.apply(this,arguments)}function F(e,t){return e.InstrumentID===t.InstrumentID&&e.PosiDirection===t.PosiDirection&&e.TradeUnitID===t.TradeUnitID}return(0,i.useEffect)((function(){!1===n&&I({})}),[n]),(g?i.useEffect:O.Z)((function(){L()}),[y.InstrumentID,o,S],!0),(0,i.useEffect)((function(){var e=function(e){if(e.action===p.nW.Position){var t,r,n=function(e,t){return P(P({},(0,l.uI)(t)),{},{Remark:"Remark"in e?e.Remark:t.Remark})},a=(0,p.g3)(e).pop()||{},o=function(e,t){var r=[];if(0===Number(t.Position))r=e.data.filter((function(e){return!F(e,t)}));else{var a=!1;r=e.data.map((function(e){return F(e,t)?(a=!0,n(e,t)):e})),a||r.unshift(n({},t))}return P(P({},e),{},{data:r})}({data:[].concat((null===(t=R.current)||void 0===t?void 0:t.data)||[],(null===(r=x.current)||void 0===r?void 0:r.data)||[])},a);I(o)}};return y.InstrumentID&&(p.ZP.on(e),(0,c.W6)()),function(){y.InstrumentID&&(0,c.DS)(),p.ZP.off(e)}}),[y.InstrumentID,n]),(0,f.Z)((function(){var e,t;[].concat((null===(e=R.current)||void 0===e?void 0:e.data)||[],(null===(t=x.current)||void 0===t?void 0:t.data)||[]).length>0&&L(!0,!0).then((function(e){var t,r,n=(e||[]).reduce((function(e,t){var r=P({},e);return r[t.PositionID]=t.FORCECLOSEPRICE,r}),{}),a=[].concat((null===(t=R.current)||void 0===t?void 0:t.data)||[],(null===(r=x.current)||void 0===r?void 0:r.data)||[]);if(a.length){var o=a.map((function(e){return P(P({},e),{},{FORCECLOSEPRICE:n[e.PositionID]})}));I({data:o})}}))}),4e3),{loading:j,result:M,copyResult:N,count:(null===(t=M.data)||void 0===t?void 0:t.length)||0,copyTradingCount:(null===(r=N.data)||void 0===r?void 0:r.length)||0,request:L,onTableSort:function(e,t,r){var n,a,o;T&&T({field:e,order:t});var u=[].concat((null===(n=R.current)||void 0===n?void 0:n.data)||[],(null===(a=x.current)||void 0===a?void 0:a.data)||[]);o=r?r({data:u},e,t):s({data:u},e,t),I({data:o})},hideOther:S,setHideOther:_}}},11043:function(e,t,r){"use strict";r.d(t,{r_:function(){return b},Ko:function(){return v},ZP:function(){return O},Oy:function(){return m}});var n=r(17674),a=r(67294),o=r(13866),u=r(98436),i=r(30510),c=r(71269),s=r(67673),l=r(59499);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="lb_futures_tools";var y=function(e,t){var r=(0,a.useState)(e),n=r[0],o=r[1],u=(0,a.useCallback)((function(e){o((function(r){var n="function"===typeof e?e(r):e;if(t){var a=s.storage.get(d);s.storage.set(d,p(p({},a),{},(0,l.default)({},t,n)))}return n}))}),[t]);return(0,a.useEffect)((function(){var e=s.storage.get(d);t&&e&&Object.hasOwnProperty.call(e,t)&&o(e[t])}),[t]),[n,u]},v="order_confirm",m=function(e){var t=(0,a.useState)(o.I.BUY_RISE_GREEN),r=t[0],l=t[1],f=(0,a.useState)(!0),p=f[0],d=f[1],m=(0,a.useState)(!0),b=m[0],O=m[1],g=(0,a.useState)(!0),P=g[0],h=g[1],S=(0,a.useState)({}),_=S[0],D=S[1],C=(0,a.useState)({}),T=C[0],w=C[1],j=(0,a.useState)(),k=j[0],E=j[1],I=(0,a.useState)({}),R=I[0],x=I[1],M=(0,a.useState)(u.JC.CROSS),N=M[0],L=M[1],Z=(0,a.useState)(u.Dy.DOUBLE),F=Z[0],U=Z[1],B=(0,a.useState)([]),A=B[0],H=B[1],G=(0,a.useState)({long:10,short:10,longMax:125,shortMax:125}),V=G[0],W=G[1],K=(0,a.useState)(),X=K[0],q=K[1],J=(0,a.useState)(!1),Y=J[0],z=J[1],Q=(0,a.useState)({available:"0",balance:"0",marginAble:"0"}),$=Q[0],ee=Q[1],te=(0,a.useState)(c.Ei),re=te[0],ne=te[1],ae=(0,a.useState)(!1),oe=ae[0],ue=ae[1],ie=(0,a.useState)(!1),ce=ie[0],se=ie[1],le=(0,a.useState)([]),fe=le[0],pe=le[1],de=y("simple_stock_chart","chart_type"),ye=(0,n.Z)(de,2),ve=ye[0],me=ye[1],be=y("15min","default_resolution"),Oe=(0,n.Z)(be,2),ge=Oe[0],Pe=Oe[1],he=y(["real_time","1min","15min"],"visible_resolution_keys"),Se=(0,n.Z)(he,2),_e=Se[0],De=Se[1],Ce=y(!0,"show_position"),Te=(0,n.Z)(Ce,2),we=Te[0],je=Te[1],ke=y(!1,"show_force_close_price"),Ee=(0,n.Z)(ke,2),Ie=Ee[0],Re=Ee[1],xe=y(!1,"show_current_order"),Me=(0,n.Z)(xe,2),Ne=Me[0],Le=Me[1],Ze=y(!1,"show_history_trans"),Fe=(0,n.Z)(Ze,2),Ue=Fe[0],Be=Fe[1],Ae=(0,a.useState)([]),He=Ae[0],Ge=Ae[1],Ve=(0,a.useState)(1),We=Ve[0],Ke=Ve[1];return(0,a.useEffect)((function(){s.storage.set(v,P)}),[P]),{colorTheme:r,setColorTheme:l,isOpenTrade:p,setIsOpenTrade:d,favourite:b,setFavourite:O,orderConfirm:P,setOrderConfirm:h,currentSymbol:_,setCurrentSymbol:D,markets:k,setMarkets:E,currentSymbolMarket:T,setCurrentSymbolMarket:w,bestBidAskPrice:R,setBestBidAskPrice:x,marginMode:N,setMarginMode:L,positionType:F,setPositionType:U,tradeConfig:A,setTradeConfig:H,levers:V,setLevers:W,volumeUnitType:i.Z.COIN,amountType:re,setAmountType:ne,defaultResolution:ge,setDefaultResolution:Pe,visibleResolutionKeys:_e,setVisibleResolutionKeys:De,chartType:ve,setChartType:me,showPosition:we,setPosition:je,showForceClosePrice:Ie,setForceClosePrice:Re,showCurrentOrder:Ne,setShowCurrentOrder:Le,showHistoryTrans:Ue,setShowHistoryTrans:Be,klineHistoryTransList:He,setKlineHistoryTransList:Ge,isTrader:oe,setIsTrader:ue,copyStatus:ce,setCopyStatus:se,traderInstruments:fe,setTraderInstruments:pe,nextRateTime:X,setNextRateTime:q,tradingViewSeriesType:We,setTradingViewSeriesType:Ke,isFinishFirstRequest:Y,setIsFinishFirstRequest:z,userAsset:$,setUserAsset:ee}},b=(0,a.createContext)({}),O=function(){return(0,a.useContext)(b)}},29047:function(e,t,r){"use strict";var n=r(67294);t.Z=function(e,t){var r=(0,n.useRef)((function(){}));(0,n.useEffect)((function(){r.current=e})),(0,n.useEffect)((function(){if(null!==t){var e=setInterval((function(){return r.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},21991:function(e){e.exports={ainput:"index_ainput__F7COr","ainput-tip":"index_ainput-tip___TJ4b","ainput-type":"index_ainput-type__p3M_e","ainput-type-selector":"index_ainput-type-selector__dAE7o","ainput-type-arrow":"index_ainput-type-arrow__lIrFH","ainput-type-value":"index_ainput-type-value__L1KuW","ainput-type-container":"index_ainput-type-container__VgWiw"}}}]);